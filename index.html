<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css" />
</head>

<body>
<script src="https://cgwire.github.io/js-3d-model-viewer/dist/js-3d-model-viewer.js"></script>
  <script>
  var modelPlayer = this.Js3dModelViewer
  var nameElement = document.getElementById('name')
  var loadingElement = document.getElementById('loading')
  var viewerElement = document.getElementById('viewer')
  var scene = modelPlayer.prepareScene(viewerElement, {
    grid: true,
    background: 'rgb(80, 80, 80)'
  })

  viewerElement.addEventListener('loading', function (event) {
    if (event.detail.loaded === 0) {
      nameElement.innerHTML = 'Loading...'
    } 
    var progress = Math.floor(100 * event.detail.loaded / event.detail.total)
    loadingElement.innerHTML = progress + '%'
  })

  modelPlayer.loadObject(scene, 'https://cgwire.github.io/js-3d-model-viewer/assets/sample.obj', null, function () {
    nameElement.innerHTML = 'Sample 01'
    loadingElement.innerHTML = ''
  })

  var fullScreenButton = document.getElementById('fullscreen-button')
  fullScreenButton.addEventListener('click', function () {
    modelPlayer.goFullScreen(viewerElement)
  })

  var sample1Button = document.getElementById('sample-1-button')
  sample1Button.addEventListener('click', function () {
    modelPlayer.clearScene(scene)
    modelPlayer.resetCamera(scene)
    modelPlayer.showGrid(scene)
    nameElement.innerHTML = 'Sample 01'
    modelPlayer.loadObject(scene, './assets/sample.obj', null, function () {
      loadingElement.innerHTML = ''
    })
  })

  var sample2Button = document.getElementById('sample-2-button')
  sample2Button.addEventListener('click', function () {
    modelPlayer.clearScene(scene)
    modelPlayer.resetCamera(scene)
    modelPlayer.showGrid(scene)
    nameElement.innerHTML = 'Sample 02'
    modelPlayer.loadObject(
      scene, 
      './assets/sample_02.obj', 
      './assets/sample_02.mtl',
      function () {
        loadingElement.innerHTML = ''
    })
  })

  var sample3Button = document.getElementById('sample-3-button')
  sample3Button.addEventListener('click', function () {
    modelPlayer.clearScene(scene)
    modelPlayer.resetCamera(scene)
    modelPlayer.showGrid(scene)
    nameElement.innerHTML = 'Sample 03'
    modelPlayer.loadObject(
      scene, 
      './assets/sample_03.obj',
      './assets/sample_03.mtl',
      function () {
        nameElement.innerHTML = 'Sample 03'
        loadingElement.innerHTML = ''
    })
  })

  var sample4Button = document.getElementById('sample-4-button')
  sample4Button.addEventListener('click', function () {
    modelPlayer.clearScene(scene)
    modelPlayer.resetCamera(scene)
    modelPlayer.showGrid(scene)
    nameElement.innerHTML = 'Sample 04'
    modelPlayer.loadGlb(
      scene, 
      './result.glb',
      function () {
        nameElement.innerHTML = 'Sample 04'
        loadingElement.innerHTML = ''
    })
  })

  /*
  var sample5Button = document.getElementById('sample-5-button')
  sample5Button.addEventListener('click', function () {
    modelPlayer.clearScene(scene)
    modelPlayer.resetCamera(scene)
    modelPlayer.showGrid(scene)
    nameElement.innerHTML = 'Sample 05'
    modelPlayer.loadUsdz(
      scene, 
      '/assets/sneakers.usdz',
      function () {
        nameElement.innerHTML = 'Sample 05'
        loadingElement.innerHTML = ''
    })
  })
  */

  var gridCheckbox = document.querySelector('#grid-button');
  gridCheckbox.onchange = function() {
  if(gridCheckbox.checked) {
    modelPlayer.showGrid(scene)
  } else {
    modelPlayer.hideGrid(scene)
  }
};
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-javascript.js"></script></body>

</html>